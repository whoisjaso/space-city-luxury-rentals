---
phase: 05-vehicle-detail-pages
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/src/pages/VehicleDetailPage.tsx
  - app/src/components/ImageGallery.tsx
  - app/src/hooks/useVehicle.ts
autonomous: true

must_haves:
  truths:
    - "VehicleDetailPage displays a single vehicle with hero image, identity headline, full description, pricing, experience tags, and social proof"
    - "ImageGallery shows a hero image with thumbnail navigation if multiple images exist"
    - "Social proof section displays rental count and popularity indicator"
    - "Prominent Book This Vehicle CTA button navigates to /book?vehicle=slug"
    - "useVehicle hook fetches a single vehicle by slug from Supabase or seed data"
    - "Page has GSAP entrance animations for cinematic feel"
    - "Back to fleet navigation link present"
  artifacts:
    - path: "app/src/pages/VehicleDetailPage.tsx"
      provides: "Vehicle detail page with gallery, description, pricing, CTA"
    - path: "app/src/components/ImageGallery.tsx"
      provides: "Hero image with optional thumbnail strip"
    - path: "app/src/hooks/useVehicle.ts"
      provides: "TanStack Query hook for single vehicle by slug"
---

<objective>
Build cinematic vehicle detail pages that sell the identity experience with hero imagery, social proof, and a clear path to book.

Purpose: Each vehicle gets its own page at /fleet/:slug. The page presents the vehicle as an identity proposition — the headline, description, and imagery work together to make the user feel what it's like to arrive in this vehicle. Social proof (rental count) and a prominent booking CTA convert browsers to bookers.

Output: Full vehicle detail page replacing the Phase 3 placeholder.
</objective>

<tasks>
<task id="1" name="Create vehicle detail page with gallery, social proof, and booking CTA" type="code">
Create the following:

1. `app/src/hooks/useVehicle.ts`:
   - TanStack Query hook: fetches single vehicle by slug
   - Query: `supabase.from('vehicles').select('*').eq('slug', slug).single()`
   - Fallback to seed data if Supabase not configured (find by slug in seed array)
   - Uses same seed data array from useVehicles
   - Export: useVehicle(slug: string) → { data: Vehicle | null, isLoading, error }

2. `app/src/components/ImageGallery.tsx`:
   - Props: images: string[], alt: string
   - Hero image displayed large (full width, aspect-ratio 16/9, object-cover)
   - If multiple images: thumbnail strip below hero, clicking a thumbnail swaps the hero
   - Active thumbnail has gold border highlight
   - Smooth transition when switching images (opacity fade)
   - Dark background behind gallery

3. Replace `app/src/pages/VehicleDetailPage.tsx`:
   - Get slug from useParams()
   - Use useVehicle(slug) for data
   - Layout (top to bottom):
     a. Back link: "← Back to Fleet" linking to /fleet (museo-label, gold text)
     b. ImageGallery component with vehicle images
     c. Two-column layout below gallery (on desktop):
        - Left (7 cols): Identity headline (large, playfair display font), vehicle name (museo-label, white/50), full description (museo-body), experience tag pills
        - Right (5 cols): Pricing card with daily price prominently displayed in gold, social proof (rental count + "times rented" or "Popular" badge), "Book This Vehicle" CTA button (full width, gold background, dark text, links to /book?vehicle={slug})
     d. On mobile: single column, stacked
   - GSAP entrance animations:
     - Gallery fades in
     - Text content staggers in from left
     - Pricing card slides in from right
   - Loading state: skeleton layout
   - Not found state: "Vehicle not found" with link back to fleet
   - Use brand colors throughout: gold for price and CTA, dark background, white text

   Social proof display:
   - Show rental_count as "Rented {count}+ times" if count > 0
   - Show "Popular" badge with fire icon if rental_count > 10
   - Show experience tags as styled pills (same as fleet page)

   Price formatting:
   - Format daily_price_cents to "$X,XXX" using (price / 100).toLocaleString()
   - Display as "From $X,XXX / day"

Commit message: feat(05-01): vehicle detail page with gallery, social proof, and booking CTA
</task>
</tasks>
